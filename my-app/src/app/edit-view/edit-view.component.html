<div class="container" fxLayout="row" fxLayoutAlign="start stretch">
  <div class="column">
      <button (click)="archive()">Archive moi</button>
  </div>

  <div class="column"  style="background-color:#f1f1f1;">
    <h3>Codesets</h3>
    <div fxLayout="column">
        <div *ngIf="isDocumentDefined===true; then thenBlock else elseBlock"></div>
        <ng-template #thenBlock>
          <button class="button" [ngClass]="{'selected': docu.label===myCodeset.label}" *ngFor="let docu of document$ | async" value="{{ docu.label }}" (click)="openDocu(event, docu.label)">{{ docu.label }}</button>
        </ng-template>
        <ng-template #elseBlock>
          <button class="button" *ngFor="let docu of document$ | async" value="{{ docu.label }}" (click)="openDocu(event, docu.label)">{{ docu.label }}</button>
        </ng-template>
    </div>
  </div>

  <div *ngIf="isDocumentDefined===true ">
    <div>
      <h3>Codes</h3>
      <table>
        <td>Value</td>
        <td>Label</td>

        <tr *ngFor="let code of myCodeset.code">
          <div *ngIf="isCodeSelected===true; then thenBlock else elseBlock"></div>
          <ng-template #thenBlock>
            <td [ngClass]="{'selected': code.value===myCode.value}">{{ code.value }}</td>
            <td [ngClass]="{'selected': code.value===myCode.value}">{{ code.label }}</td>
            <td [ngClass]="{'selected': code.value===myCode.value}">
              <button title="Show details" class="button" value="{{ code.label }}" (click)="openCodeset(event, code)">></button>
            </td>
          </ng-template>
          <ng-template #elseBlock>
              <td>{{ code.value }}</td>
              <td>{{ code.label }}</td>
              <td>
                <button title="Show details" class="button" value="{{ code.label }}" (click)="openCodeset(event, code)">></button>
              </td>
          </ng-template>
        </tr>
      </table>
    </div>
  </div>
  <div *ngIf="isDocumentDefined===true ">
    <div class="column" style="background-color:#f1f1f1;">
      <h3>Details</h3>
      <h5>Codeset label: {{myCodeset.label}}</h5>
      <h5>Codeset type: {{myCodeset.type}}</h5>
      
      <div *ngIf="isCodeSelected===true ">
    
        <p>Code label:
         <input [(ngModel)]="myCode.label"/>
        </p>
        
        <p>Code value:  <input [(ngModel)]="myCode.value"/>  </p>
        <p>Description: <input [(ngModel)]="myCode.description"/></p>
        
        
        <div *ngIf="myCode.status==true; else elseBlock">
          <p>
            Status: Valid
          </p>
        </div>
        <ng-template #elseBlock>
          <p>
            Status: Invalid
          </p>
        </ng-template>
        <p>
          Use age:
          <br>
          <span>Not before month:  <input [(ngModel)]="myCode.use_age.not_before_month"/>
          </span>
          <br>
          <span>Not after month: 
          <input [(ngModel)]="myCode.use_age.not_after_month"/>          
      </span>
        </p>

        <p>
          Use date:
          <br>
          <span>Not before: 
          <input [(ngModel)]="myCode.use_date.not_before"/> </span>
          <br>
          <span>Not expected before: 
                    <input [(ngModel)]="myCode.use_date.not_before"/> 
          </span>
          <br>
          <span>Not after: 
                    <input [(ngModel)]="myCode.use_date.not_after"/> 
          </span>
          <br>
          <span>Not expected after:
              <input [(ngModel)]="myCode.use_date.not_expected_after"/>
          </span>
        </p>

        <p>Test age:              <input [(ngModel)]="myCode.test_age"/>
 </p>
        <p>Concept type:  <input [(ngModel)]="myCode.concept_type"/> </p>

        <p>References:</p>
        <ul class="superList">
          <li *ngFor="let ref of myCode.references">
            <a href="#" (click)="goToReference(ref.type, ref.codeValue)" onclick="return false;"> {{ref.type}} - {{ref.codeValue}} </a>
          </li>
        </ul>
      <button (click)="goBack()">go back</button>
      <button (click)="save()">save</button>
      </div>
    </div>
  </div>

</div>

<!--
<div class="container">
  <form id="searchForm" (ngSubmit)="onSubmit(f)" #f="ngForm">
          <div class="form-group">
            <label for="name">
              Search For Codesets
            </label>
            <input type="text" id="url_search" class="form-control" name="url" ngModel required>
          </div>
          
          <button class="btn btn-primary" type="submit" [disabled]="f.invalid">Search</button>       
  </form>
</div>
-->

<!--
<div class="container">
  <div class="tab">
    <button class="tablinks" *ngFor="let docu of document$ | async" value="{{ docu.label }}" (click)="openDocu(event, docu.label)">{{ docu.label }}</button>
  </div>
</div>
-->

<!--
<ul *ngFor="let docu of document$ | async" >
  <div id="{{docu.label}}" class="tabcontent">
    <h3>{{docu.label}}</h3>
    <h4>Type: {{docu.type}} </h4>
  </div>

</ul>
-->

<!--<div class="container">
<form id="selection" (ngSubmit)="onClicked(g)" #g="ngForm">
        <div class="form-group">
          <label>
            Show Data: 
          </label>
            <select name="docSelection" id="docSelection" class="form-control" ngModel>
        
              <option *ngFor="let docu of document$ | async" value="{{ docu.label }}" >{{ docu.label }}</option>
              
            </select></div>  
            <button class="btn btn-primary" type="submit" >Show</button>
  </form>

<div class="File-menu" >

  <div *ngIf="isDocumentDefined===true ">
      <label> Showing Data for:  {{ myCodeset.label }} </label>
      <h1>Description: </h1>
      <p>{{ myCodeset.code[0].label }} </p>

  </div>
</div>

-->